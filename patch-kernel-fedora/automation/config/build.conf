# AW88399 Kernel Build Configuration
# ====================================

# ============================================================================
# KERNEL SIGNING
# ============================================================================

# Enable kernel signing for Secure Boot
# When true, the script will verify MOK setup before building
ENABLE_SIGNING=true

# MOK (Machine Owner Key) configuration
# Path to MOK key directory (leave empty for default: /var/lib/shim-signed/mok)
MOK_KEY_DIR=""

# Certificate name used in pesign NSS database
MOK_CERT_NAME="MOK Signing Key"

# Common Name for new MOK certificates (if creating new key)
MOK_KEY_CN="Kernel Signing Key"

# Certificate validity in days (default: ~100 years)
MOK_VALIDITY_DAYS=36500

# ============================================================================
# BUILD OPTIONS
# ============================================================================

# Fedora version (auto-detected by default, can override)
# Leave empty for automatic detection from current system
FEDORA_RELEASE=""  # Auto: f43, f44, etc.

# BuildID to identify your custom kernel (appears in uname -r)
BUILD_ID=".audio"

# Compilation options (all default to true for faster builds)
BUILD_WITHOUT_SELFTESTS=true   # Skip kernel selftests compilation
BUILD_WITHOUT_DEBUG=true       # Skip separate kernel-debug package
BUILD_WITHOUT_DEBUGINFO=false  # Keep BTF info for eBPF (recommended)

# ============================================================================
# RESOURCE MANAGEMENT
# ============================================================================

# Upstream repository for patches, firmware, and UCM2 files
# The script clones this repo to get the latest resources
AUDIO_FIX_REPO="https://github.com/nadimkobeissi/16iax10h-linux-sound-saga.git"

# ============================================================================
# VERSION DETECTION
# ============================================================================

# Number of versions to show per major version (6.18.x, 6.19.x)
MAX_VERSIONS_PER_MAJOR=5

# ============================================================================
# PATHS
# ============================================================================

# Main working directory for kernel build
WORK_DIR="$HOME/fedora-kernel-build"

# Resource cache directory (for cloned fix repo)
RESOURCE_CACHE_DIR="${WORK_DIR}/resources"

# ============================================================================
# LOGGING
# ============================================================================

# Log directory (relative to script location or absolute path)
# Leave empty to use default: ./logs in the automation directory
LOG_DIR=""
LOG_LEVEL="INFO"  # DEBUG, INFO, WARN, ERROR

# ============================================================================
# SECURITY
# ============================================================================

# Auto-install RPMs without confirmation (false = ask for confirmation)
AUTO_INSTALL=false

# Set new kernel as default boot entry after successful build
SET_DEFAULT_KERNEL=true

# ============================================================================
# CLEANUP & ARCHIVING
# ============================================================================

# Archive RPMs before cleaning up build directories
ARCHIVE_RPMS=true

# Directory where to store archived RPMs (compressed .tar.gz)
ARCHIVE_DIR="$HOME/kernel-archives"

# ============================================================================
# STATE MANAGEMENT (for resume after reboot)
# ============================================================================

# State file location (for resuming script after MOK enrollment reboot)
STATE_FILE="/tmp/kernel-build-state"
